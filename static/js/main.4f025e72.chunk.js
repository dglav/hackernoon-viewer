(this["webpackJsonphackernoon-viewer"]=this["webpackJsonphackernoon-viewer"]||[]).push([[0],{26:function(e,n,t){e.exports=t(50)},31:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(18),c=t.n(o),i=(t(31),Object(r.createContext)()),u=function(e){return a.a.createElement(i.Provider,{value:{darkPrimaryColor:"#F57C00",defaultPrimaryColor:"#FF9800",lightPrimaryColor:"#FFE0B2",primaryTextColor:"#212121",accentColor:"#FFC107",secondaryTextColor:"#757575",dividerColor:"#BDBDBD"}},e.children)},s=t(3),l=t(19),f=t(23),m={ADD_FAVORITE:"ADD_FAVORITE",DELETE_FAVORITE:"DELETE_FAVORITE",ADD_BOOKMARK:"ADD_BOOKMARK",DELETE_BOOKMARK:"DELETE_BOOKMARK",REMOVE_SAVED_POSTS:"REMOVE_SAVED_POSTS"};function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){Object(l.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=function(e,n){return e.map((function(e){return e.id})).includes(n.id)?e:[].concat(Object(f.a)(e),[n])},h=function(e,n){return e.filter((function(e){if(e.id!==n)return e}))},v=function(e,n){switch(n.type){case m.ADD_FAVORITE:return b({},e,{favorites:p(e.favorites,n.payload)});case m.DELETE_FAVORITE:return b({},e,{favorites:h(e.favorites,n.payload)});case m.REMOVE_SAVED_POSTS:return b({},e,{favorites:[],bookmarks:[]});case m.ADD_BOOKMARK:return b({},e,{bookmarks:p(e.bookmarks,n.payload)});case m.DELETE_BOOKMARK:return b({},e,{bookmarks:h(e.bookmarks,n.payload)});default:return e}},O=Object(r.createContext)(),E=function(e){var n=Object(r.useReducer)(v,{feedPosts:[],favorites:[],bookmarks:[]}),t=Object(s.a)(n,2),o=t[0],c=t[1];return a.a.createElement(O.Provider,{value:{posts:o,dispatch:c}},e.children)},y=Object(r.createContext)(),x=function(e){var n=Object(r.useState)(""),t=Object(s.a)(n,2),o=t[0],c=t[1];return a.a.createElement(y.Provider,{value:{user:o,setUser:c}},e.children)},j=t(1),g=t(2);function k(){var e=Object(j.a)(["\n  border-radius: 100px;\n  width: 96px;\n  height: 48px;\n  box-sizing: border-box;\n  color: ",";\n  border: 3px solid ",';\n  background-color: rgba(0, 0, 0, 0);\n  cursor: pointer;\n  font-family: "Tomorrow";\n  font-weight: 600;\n\n  &:focus {\n    outline: none;\n  }\n\n  &:active {\n    box-shadow: inset 0px 0px 5px grey;\n  }\n\n  &:hover {\n    background-color: ',";\n    color: ",";\n  }\n"]);return k=function(){return e},e}var C=g.b.button(k(),(function(e){return e.theme.lightPrimaryColor}),(function(e){return e.theme.lightPrimaryColor}),(function(e){return e.theme.lightPrimaryColor}),(function(e){return e.theme.darkPrimaryColor})),w=function(){var e=Object(r.useContext)(y),n=e.user,t=e.setUser,o=Object(r.useContext)(i);return a.a.createElement(C,{onClick:function(){return function(e){t(e?"":"defaultUser")}(n)},theme:o},n?"Logout":"Login")};function T(){var e=Object(j.a)(["\n  font-size: 1.4em;\n  background-color: ",";\n  color: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  height: 56px;\n  box-sizing: border-box;\n  padding: 0 15%;\n"]);return T=function(){return e},e}var D=g.b.header(T(),(function(e){return e.theme.darkPrimaryColor}),(function(e){return e.theme.primaryTextColor})),S=function(){var e=Object(r.useContext)(i);return a.a.createElement(D,{theme:e},a.a.createElement("p",null,"Hacker News"),a.a.createElement(w,null))};function P(){var e=Object(j.a)(["\n  color: ",";\n  font-size: 2em;\n"]);return P=function(){return e},e}function A(){var e=Object(j.a)(["\n  width: 85%;\n  margin: 0 auto;\n  text-align: center;\n  color: ",";\n  margin-bottom: 16px;\n"]);return A=function(){return e},e}var F=g.b.footer(A(),(function(e){return e.theme.primaryTextColor})),_=g.b.a(P(),(function(e){return e.theme.darkPrimaryColor})),R=function(){var e=Object(r.useContext)(i);return a.a.createElement(F,{theme:e},a.a.createElement(_,{href:"https://github.com/dglav/hackernoon-viewer",target:"_blank",theme:e},a.a.createElement("i",{className:"fab fa-github"})))};function L(){var e=Object(j.a)(["\n  padding: 0 8px;\n"]);return L=function(){return e},e}function I(){var e=Object(j.a)(["\n  border: 6px solid ",";\n  border-radius: 0 0 10px 10px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]);return I=function(){return e},e}function M(){var e=Object(j.a)(["\n  width: 70%;\n  box-sizing: border-box;\n  margin: 16px auto;\n  color: ",";\n"]);return M=function(){return e},e}var V=g.b.div(M(),(function(e){return e.theme.primaryTextColor})),B=g.b.div(I(),(function(e){return e.theme.darkPrimaryColor})),K=g.b.div(L()),N=t(4),U=t.n(N),z=t(5);function Q(){var e=Object(j.a)(["none"]);return Q=function(){return e},e}function H(){var e=Object(j.a)(["\n          "," 2s linear infinite\n        "]);return H=function(){return e},e}function W(){var e=Object(j.a)(["\n  margin-top: 4px;\n  display: ",";\n  animation: ",";\n"]);return W=function(){return e},e}function J(){var e=Object(j.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]);return J=function(){return e},e}function $(){var e=Object(j.a)(['\n  padding: 0;\n  margin: 0;\n  display: flex;\n  align-items: flex-end;\n\n  li {\n    list-style: none;\n\n    input[type="radio"] {\n      position: absolute;\n      top: 0;\n      left: -100px;\n      &:checked + label {\n        background-color: ',";\n        border-right: none;\n      }\n    }\n\n    label {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      width: 128px;\n      height: 56px;\n      cursor: pointer;\n      text-align: center;\n      background-color: ",";\n      border-radius: 10px 10px 0 0;\n\n      &:hover {\n        background-color: ",";\n      }\n    }\n  }\n"]);return $=function(){return e},e}var q=g.b.ul($(),(function(e){return e.theme.darkPrimaryColor}),(function(e){return e.theme.defaultPrimaryColor}),(function(e){return e.theme.darkPrimaryColor})),G=Object(g.c)(J()),X=g.b.i(W(),(function(e){return e.visible?"block":"none"}),(function(e){return e.syncing?Object(g.a)(H(),G):Object(g.a)(Q())})),Y=function(e){return{type:m.ADD_FAVORITE,payload:e}},Z=function(e){return{type:m.ADD_BOOKMARK,payload:e}},ee=t(6),ne=t.n(ee),te=(t(37),function(){var e=Object(z.a)(U.a.mark((function e(n){var t,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=ae.collection("users/defaultUser/".concat(n)),e.next=4,t.get();case 4:return r=e.sent,e.abrupt("return",r.docs.map((function(e){return e.data()})));case 8:e.prev=8,e.t0=e.catch(0),console.log("Error getting documents",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}()),re=function(){var e=Object(z.a)(U.a.mark((function e(n,t){var r,a,o;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(n);case 3:r=e.sent,a=r.map((function(e){return e.id})),o=t.map((function(e){return e.id})),t.forEach(function(){var e=Object(z.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.includes(t.id)){e.next=4;break}return r=ae.doc("users/defaultUser/".concat(n,"/").concat(t.id)),e.next=4,r.set(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),a.forEach(function(){var e=Object(z.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.includes(t)){e.next=4;break}return r=ae.doc("users/defaultUser/".concat(n,"/").concat(t)),e.next=4,r.delete();case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in syncing with database",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}();ne.a.initializeApp({apiKey:"AIzaSyCWLmJrw_OOwQ5mpoh3y6NtSw51xOU0WiU",authDomain:"hackernoon-viewer.firebaseapp.com",databaseURL:"https://hackernoon-viewer.firebaseio.com",projectId:"hackernoon-viewer",storageBucket:"hackernoon-viewer.appspot.com",messagingSenderId:"863046137003",appId:"1:863046137003:web:ce7a7821f70986e946b3ee"});var ae=ne.a.firestore(),oe=(ne.a,function(e){var n=e.selectedTab,t=n.selectedTab,o=n.setSelectedTab,c=Object(r.useContext)(i),u=Object(r.useContext)(O),l=u.posts,f=u.dispatch,d=Object(r.useContext)(y).user,b=Object(r.useState)(!1),p=Object(s.a)(b,2),h=p[0],v=p[1],E=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=t[0];d&&a===e&&x(e),o(e)},x=function(){var e=Object(z.a)(U.a.mark((function e(n){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,re(n,l[n]);case 3:v(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){d?function(){var e=Object(z.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("favorites");case 2:return e.sent.forEach((function(e){return f(Y(e))})),e.next=6,te("bookmarks");case 6:e.sent.forEach((function(e){return f(Z(e))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():f({type:m.REMOVE_SAVED_POSTS,payload:null})}),[d]),a.a.createElement(q,{theme:c},a.a.createElement("li",null,a.a.createElement("input",{type:"radio",id:"tab1",name:"tab",checked:"feed"===t,onClick:function(){return E("feed")},readOnly:!0}),a.a.createElement("label",{htmlFor:"tab1"},"Feed")),a.a.createElement("li",null,a.a.createElement("input",{type:"radio",id:"tab2",name:"tab",onClick:function(){return E("bookmarks",t)}}),a.a.createElement("label",{htmlFor:"tab2"},a.a.createElement("span",null,"Bookmarks"),d?a.a.createElement("span",null,a.a.createElement(X,{className:"fas fa-sync",visible:"bookmarks"===t,syncing:h})):null)),a.a.createElement("li",null,a.a.createElement("input",{type:"radio",id:"tab3",name:"tab",onClick:function(){return E("favorites",t)}}),a.a.createElement("label",{htmlFor:"tab3"},a.a.createElement("span",null,"Favorites"),d?a.a.createElement("span",null,a.a.createElement(X,{className:"fas fa-sync",visible:"favorites"===t,syncing:h})):null)))});function ce(e,n){var t=Object(r.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1];return Object(r.useEffect)((function(){n=n.toLowerCase(),c(n?e.filter((function(e){var t=Object.keys(e).includes("url");if(!1!==e.title.toLowerCase().includes(n)||t&&!1!==e.url.includes(n))return e})):e)}),[e,n]),o}var ie=t(54),ue=t(22),se=t.n(ue);function le(){var e=Object(j.a)(["\n  height: 100%;\n  width: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n\n  .rotate {\n    animation: "," 1s ease-in-out;\n  }\n"]);return le=function(){return e},e}function fe(){var e=Object(j.a)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(180deg);\n  }\n"]);return fe=function(){return e},e}function me(){var e=Object(j.a)(["\n  display: flex;\n  visibility: ",";\n  position: absolute;\n  right: -8px;\n  top: 0;\n  justify-content: right;\n  align-items: center;\n  height: 100%;\n  background-color: ",";\n  border-radius: 10px 0 0 10px;\n"]);return me=function(){return e},e}var de=g.b.div(me(),(function(e){return e.iconTrayVisibility?"visible":"hidden"}),(function(e){return e.theme.accentColor})),be=Object(g.c)(fe()),pe=g.b.div(le(),be),he=function(e){var n=e.postData,t=e.parent,o=e.iconClickHandler,c=e.iconTrayVisibility,u=e.animation,l=Object(r.useContext)(i),f=Object(r.useContext)(O).dispatch,m=Object(r.useState)(!1),d=Object(s.a)(m,2),b=d[0],p=d[1],h=Object(r.useState)(!1),v=Object(s.a)(h,2),E=v[0],y=v[1],x=Object(r.useState)(!1),j=Object(s.a)(x,2),g=j[0],k=j[1],C=function(e){"bookmarks"===e?p(!b):"favorites"===e?y(!E):"remove"===e&&k(!g)};return a.a.createElement(de,{theme:l,iconTrayVisibility:c,id:"IconTray",className:"animated ".concat(u)},"bookmarks"===t?null:a.a.createElement(pe,{onClick:function(){return f(Z(n))},onMouseEnter:function(){return C("bookmarks")},onMouseLeave:function(){return C("bookmarks")}},a.a.createElement("i",{className:"".concat(b?"fas":"far"," fa-bookmark")})),"favorites"===t?null:a.a.createElement(pe,{onClick:function(){return f(Y(n))},onMouseEnter:function(){return C("favorites")},onMouseLeave:function(){return C("favorites")}},a.a.createElement("i",{className:"".concat(E?"fas":"far"," fa-star")})),"feed"===t?null:a.a.createElement(pe,{onClick:o,onMouseEnter:function(){return C("remove")},onMouseLeave:function(){return C("remove")}},a.a.createElement("i",{className:"fas fa-times ".concat(g?"rotate":"")})))};function ve(){var e=Object(j.a)(["\n  margin: 0;\n  font-size: 0.7em;\n  color: ",";\n  a {\n    text-decoration: none;\n    color: ",";\n\n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"]);return ve=function(){return e},e}function Oe(){var e=Object(j.a)(["\n  margin: 0;\n  font-weight: normal;\n"]);return Oe=function(){return e},e}function Ee(){var e=Object(j.a)(["\n  padding: 8px 0;\n  position: relative;\n  &:first-child {\n    #IconTray {\n      border-radius: 0 0 0 10px;\n    }\n  }\n  &:last-child {\n    #IconTray {\n      border-radius: 10px 0 4px 0;\n    }\n  }\n"]);return Ee=function(){return e},e}var ye=g.b.div(Ee()),xe=g.b.h4(Oe()),je=g.b.span(ve(),(function(e){return e.theme.secondaryTextColor}),(function(e){return e.theme.secondaryTextColor}));ie.a.addLocale(se.a);var ge=function(e){var n=e.postData,t=e.parent,o=e.iconClickHandler,c=n.id,u=n.by,l=n.time,f=n.title,m=n.url,d=n.score,b=n.descendants,p=Object(r.useContext)(i),h=Object(r.useContext)(y).user,v=new ie.a("en-US").format(1e3*l),O="https://news.ycombinator.com/item?id=".concat(c),E=Object(r.useState)(!1),x=Object(s.a)(E,2),j=x[0],g=x[1],k=Object(r.useState)(""),C=Object(s.a)(k,2),w=C[0],T=C[1],D=function(e){h&&(e?(g(!0),T("slideInRight")):T("slideOutRight"))};return a.a.createElement(ye,{onMouseEnter:function(){return D(!0)},onMouseLeave:function(){return D(!1)}},a.a.createElement("div",{id:"content"},a.a.createElement(xe,null,f),a.a.createElement(je,{theme:p},d," points | ",u," | ",v," |"," ",a.a.createElement("a",{href:O,target:"_blank"},b," comments")," ","|"," ",a.a.createElement("a",{href:m,target:"_blank"},m))),h?a.a.createElement(he,{postData:n,parent:t,iconTrayVisibility:j,animation:w,iconClickHandler:o}):null)},ke=function(e){var n=e.searchQuery,t=Object(r.useState)(!1),o=Object(s.a)(t,2),c=o[0],i=o[1],u=Object(r.useState)([]),l=Object(s.a)(u,2),f=l[0],m=l[1],d=15;Object(r.useEffect)((function(){function e(){return(e=Object(z.a)(U.a.mark((function e(){var n,t,r,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,fetch("https://hacker-news.firebaseio.com/v0/topstories.json");case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,r=t.slice(0,d),a=r.map(function(){var e=Object(z.a)(U.a.mark((function e(n){var t,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(n,".json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),Promise.all(a).then((function(e){m(e),i(!1)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var b=ce(f,n);return a.a.createElement(a.a.Fragment,null,c?a.a.createElement("p",null,"Loading..."):a.a.createElement("div",null,b.map((function(e){return a.a.createElement(ge,{key:e.id,postData:e,parent:"feed"})}))))},Ce=function(e){var n=e.searchQuery,t=Object(r.useContext)(O),o=t.posts.bookmarks,c=t.dispatch,i=ce(o,n);return a.a.createElement(a.a.Fragment,null,i.length?i.map((function(e){return a.a.createElement(ge,{key:e.id,postData:e,parent:"bookmarks",iconClickHandler:function(){return c((n=e.id,{type:m.DELETE_BOOKMARK,payload:n}));var n}})})):a.a.createElement("p",null,"No bookmarks to display. Login and add some!"))},we=function(e){var n=e.searchQuery,t=Object(r.useContext)(O),o=t.posts.favorites,c=t.dispatch,i=ce(o,n);return a.a.createElement(a.a.Fragment,null,i.length?i.map((function(e){return a.a.createElement(ge,{key:e.id,postData:e,parent:"favorites",iconClickHandler:function(){return c((n=e.id,{type:m.DELETE_FAVORITE,payload:n}));var n}})})):a.a.createElement("p",null,"No favorites to display. Login and add some!"))};function Te(){var e=Object(j.a)(["\n  height: 100%;\n  flex: 1 0 auto;\n  padding: 0 8px;\n  border: none;\n  outline: none;\n  background-color: ",";\n  color: ",';\n  font-family: "Tomorrow";\n']);return Te=function(){return e},e}function De(){var e=Object(j.a)(["\n  padding-left: 8px;\n"]);return De=function(){return e},e}function Se(){var e=Object(j.a)(["\n  width: 100%;\n  height: 40px;\n  box-sizing: border-box;\n  background-color: ",";\n  display: flex;\n  align-items: center;\n  color: ",";\n"]);return Se=function(){return e},e}var Pe=g.b.div(Se(),(function(e){return e.theme.lightPrimaryColor}),(function(e){return e.isInputFocused?e.theme.primaryTextColor:e.theme.secondaryTextColor})),Ae=g.b.i(De()),Fe=g.b.input(Te(),(function(e){return e.theme.lightPrimaryColor}),(function(e){return e.isInputFocused?e.theme.primaryTextColor:e.theme.secondaryTextColor})),_e=function(e){var n=e.onChange,t=Object(r.useContext)(i),o=Object(r.useState)(!1),c=Object(s.a)(o,2),u=c[0],l=c[1],f=function(){l(!u)};return a.a.createElement(Pe,{theme:t,isInputFocused:u},a.a.createElement(Ae,{className:"fas fa-search",theme:t}),a.a.createElement(Fe,{type:"search",placeholder:"Filter based on: title, url",theme:t,onFocus:function(){return f()},onBlur:function(){return f()},isInputFocused:u,onChange:n}))},Re=function(){var e=Object(r.useContext)(i),n=Object(r.useState)("feed"),t=Object(s.a)(n,2),o=t[0],c=t[1],u=Object(r.useState)(""),l=Object(s.a)(u,2),f=l[0],m=l[1];return a.a.createElement(V,{theme:e},a.a.createElement(oe,{selectedTab:{selectedTab:o,setSelectedTab:c}}),a.a.createElement(B,{theme:e},a.a.createElement(_e,{onChange:function(e){m(e.target.value)}}),a.a.createElement(K,null,function(e){switch(e){case"feed":return a.a.createElement(ke,{searchQuery:f});case"bookmarks":return a.a.createElement(Ce,{searchQuery:f});case"favorites":return a.a.createElement(we,{searchQuery:f});default:return null}}(o))))};var Le=function(){return a.a.createElement(u,null,a.a.createElement(x,null,a.a.createElement(S,null),a.a.createElement(E,null,a.a.createElement(Re,null)),a.a.createElement(R,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.4f025e72.chunk.js.map